<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
  <title>安装软件</title>
</head>
<body>
    <div style="text-align:center;margin-top:80px;">
        <img id="icon" style="width:100px;height:100px;" src="./ios/edaijia.57x57.png"/>
    </div>
    
    <div style="text-align:center;color:#969799;font-size:14px;font-family:"PingFangSC-Regular";white-space:pre-wrap;">
        <p style="width:100%">e代驾-iOS客户端</p>
        <p style="width:100%" id="agent"></p>
    </div>
    <div style="text-align:center;font-family:"PingFangSC-Regular";font-size:16px;" id="install">
        <button style="background:#3B414D;color:#ffffff;" onclick="install()">
            点击安装
        </button>
    </div>
</body>
<script>
    document.addEventListener("readystatechange", function (e) {
        if (e.target.readyState === 'complete') {
              var userAgent = navigator.userAgent
              document.getElementById("agent").innerText = userAgent
        } else {
            
        }
    })

    function install() {
        var userAgent = navigator.userAgent
        var ie = userAgent.indexOf("Safari")
        if (ie == -1) {
            alert("请在Safari上打开")
            return
        }
        var iPhone = userAgent.indexOf("iPhone")
        if (iPhone == -1) {
            alert("请在iPhone系统中操作")
            return
        }
        document.getElementById("install").style.display = "none"
        var showClosure = function() {
            document.getElementById("install").style.display = "block"
        };
        setTimeout(showClosure, 3000)
                
        var manifestURL = "https://raw.githubusercontent.com/MrDeveloperLiu/OTA/master/ios/manifest.plist"
        var appURL = "itms-services://?action=download-manifest&url=" + manifestURL
        window.location.href = appURL
    }

</script>
</html>
